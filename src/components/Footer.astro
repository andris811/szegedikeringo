---
import { content } from '../content.js';

const { pathname } = Astro.url;
const isEnglish = pathname.startsWith('/en');
const isSerbian = pathname.startsWith('/sr');
const isGerman = pathname.startsWith('/de');
const lang = isGerman ? 'de' : (isSerbian ? 'sr' : (isEnglish ? 'en' : 'hu'));

const footer = content[lang].footer;
const nav = content[lang].nav;
const contactInfo = content[lang].contact.info;
const currentYear = new Date().getFullYear();

// Adjust navigation links based on language
const navLinks = isGerman ? {
  home: '/de/',
  about: '/de/uber-den-zuchter',
  breed: '/de/uber-die-rasse',
  gallery: '/de/galerie',
  contact: '/de/kontakt'
} : isSerbian ? {
  home: '/sr/',
  about: '/sr/o-uzgajivaciju',
  breed: '/sr/o-rasi',
  gallery: '/sr/galerija',
  contact: '/sr/kontakt'
} : isEnglish ? {
  home: '/en/',
  about: '/en/about-the-breeder',
  breed: '/en/about-the-breed',
  gallery: '/en/gallery',
  contact: '/en/contact'
} : {
  home: '/',
  about: '/a-tenyesztorol',
  breed: '/a-fajtarol',
  gallery: '/galeria',
  contact: '/kapcsolat'
};
---

<footer class="bg-primary-900 dark:bg-gray-900 text-gray-300 dark:text-gray-400 transition-colors">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      <!-- About Section -->
      <div>
        <h3 class="text-white text-lg font-semibold mb-4">{footer.about.title}</h3>
        <p class="text-sm leading-relaxed">
          {footer.about.text}
        </p>
      </div>

      <!-- Links Section -->
      <div>
        <h3 class="text-white text-lg font-semibold mb-4">{footer.links.title}</h3>
        <ul class="space-y-2">
          <li>
            <a href={navLinks.home} class="text-sm hover:text-primary-400 dark:hover:text-gray-300 transition-colors">
              {nav.home}
            </a>
          </li>
          <li>
            <a href={navLinks.about} class="text-sm hover:text-primary-400 dark:hover:text-gray-300 transition-colors">
              {nav.about}
            </a>
          </li>
          <li>
            <a href={navLinks.breed} class="text-sm hover:text-primary-400 dark:hover:text-gray-300 transition-colors">
              {nav.breed}
            </a>
          </li>
          <li>
            <a href={navLinks.gallery} class="text-sm hover:text-primary-400 dark:hover:text-gray-300 transition-colors">
              {nav.gallery}
            </a>
          </li>
          <li>
            <a href={navLinks.contact} class="text-sm hover:text-primary-400 dark:hover:text-gray-300 transition-colors">
              {nav.contact}
            </a>
          </li>
        </ul>
      </div>

      <!-- Contact & Social Section -->
      <div>
        <h3 class="text-white text-lg font-semibold mb-4">{footer.contact.title}</h3>

        <!-- Social Media Links -->
        <div class="flex space-x-4 mb-4">
          <!-- Facebook -->
          <a
            href="https://www.facebook.com/share/1BgL13xgXn/?mibextid=wwXIfr"
            target="_blank"
            rel="noopener noreferrer"
            class="w-10 h-10 bg-primary-800 dark:bg-gray-700 rounded-full flex items-center justify-center hover:bg-primary-600 dark:hover:bg-gray-600 transition-colors text-gray-300"
            aria-label="Facebook"
          >
            <i class="fab fa-facebook-f"></i>
          </a>

          <!-- Instagram -->
          <a
            href="https://www.instagram.com/andras.varga.104418?igsh=MWRkMHhwMHExZm9xZA=="
            target="_blank"
            rel="noopener noreferrer"
            class="w-10 h-10 bg-primary-800 dark:bg-gray-700 rounded-full flex items-center justify-center hover:bg-primary-600 dark:hover:bg-gray-600 transition-colors text-gray-300"
            aria-label="Instagram"
          >
            <i class="fab fa-instagram"></i>
          </a>

          <!-- Viber -->
          <a
            href="viber://chat?number=+36303304567"
            class="w-10 h-10 bg-primary-800 dark:bg-gray-700 rounded-full flex items-center justify-center hover:bg-primary-600 dark:hover:bg-gray-600 transition-colors text-gray-300"
            aria-label="Viber"
          >
            <i class="fab fa-viber"></i>
          </a>
        </div>

        <p class="text-sm text-gray-400 mt-4">
          {footer.contact.email}
          <button
            id="footer-reveal-email"
            class="text-primary-400 dark:text-gray-300 hover:text-primary-300 dark:hover:text-gray-200 transition-colors cursor-pointer underline"
            data-email={footer.contact.emailValue}
          >
            {contactInfo.revealButton}
          </button>
        </p>
      </div>
    </div>

    <!-- Bottom Bar -->
    <div class="border-t border-primary-800 dark:border-gray-700 mt-8 pt-8 flex flex-col md:flex-row justify-between items-center">
      <p class="text-sm text-gray-400">
        Â© {currentYear} {footer.copyrightName} {footer.copyright}
      </p>

      <p class="text-sm text-gray-400 mt-4 md:mt-0">
        {footer.madeWith} <a href="https://andris811.github.io/avdev/" class="text-primary-400 dark:text-gray-300 hover:text-primary-300 dark:hover:text-gray-200" target="_blank" rel="noopener">AVDev</a>
      </p>
    </div>
  </div>
</footer>

<script>
  // Footer email reveal functionality
  document.addEventListener('DOMContentLoaded', () => {
    const emailBtn = document.getElementById('footer-reveal-email');
    if (emailBtn) {
      emailBtn.addEventListener('click', () => {
        const email = emailBtn.dataset.email || '';
        if (email) {
          const link = document.createElement('a');
          link.href = `mailto:${email}`;
          link.className = 'text-primary-400 dark:text-gray-300 hover:text-primary-300 dark:hover:text-gray-200 transition-colors';
          link.textContent = email;
          emailBtn.replaceWith(link);
        }
      });
    }
  });
</script>
